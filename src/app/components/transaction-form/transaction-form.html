<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header bg-light py-3">
          <h3 class="card-title mb-0 fw-semibold">{{ editMode ? 'Edit' : 'Add New' }} Transaction</h3>
        </div>

        <div class="card-body p-4">
          <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
            <!-- Type picker -->
            <div class="mb-3">
              <label class="form-label">Type</label>
              <div class="btn-group w-100" role="radiogroup" aria-label="Transaction type">
                <button type="button"
                        class="btn w-50"
                        [ngClass]="transactionForm.get('type')?.value === 'expense' ? 'btn-primary' : 'btn-outline-primary'"
                        (click)="transactionForm.get('type')?.setValue('expense'); onTypeChange()">
                  Expense
                </button>
                <button type="button"
                        class="btn w-50"
                        [ngClass]="transactionForm.get('type')?.value === 'income' ? 'btn-primary' : 'btn-outline-primary'"
                        (click)="transactionForm.get('type')?.setValue('income'); onTypeChange()">
                  Income
                </button>
              </div>
            </div>

            <!-- category + description in one row -->
            <div class="mb-3 row g-2 align-items-center">
              <div class="col-12 col-md-2">
                <label class="visually-hidden">Category</label>
                <select class="form-select" formControlName="category" aria-label="Category">
                  <option *ngFor="let c of availableCategories" [value]="c">{{ c }}</option>
                </select>
              </div>

              <div class="col-12 col-md-10">
                <label class="form-label">Description</label>
                <input class="form-control" formControlName="description" placeholder="Optional notes" />
              </div>
            </div>

            <!-- Amount -->
            <div class="mb-3">
              <label class="form-label">Amount</label>
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  formControlName="amount"
                  placeholder="0.00"
                  inputmode="decimal"
                  (input)="onAmountInput($event)"
                  (blur)="formatAmount()" />
              </div>
              <div *ngIf="transactionForm.get('amount')?.invalid && (transactionForm.get('amount')?.touched || transactionForm.get('amount')?.dirty)"
                   class="text-danger small mt-2">
                Enter a valid amount.
              </div>
            </div>

            <!-- Date -->
            <div class="mb-4">
              <label class="form-label">Date</label>
              <input type="datetime-local" class="form-control" formControlName="createdAt" />
            </div>

            <!-- Actions -->
            <div class="d-flex justify-content-end pt-3">
              <button type="button" class="btn btn-outline-secondary me-2" (click)="cancel()">Cancel</button>
              <button type="submit" class="btn btn-primary" [disabled]="transactionForm.invalid">{{ editMode ? 'Save' : 'Create' }}</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>