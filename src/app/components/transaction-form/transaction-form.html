<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow-sm">
                <div class="card-header bg-lightly bg-opacity-25 py-3">
                    <h3 class="card-title mb-0 fw-semibold">{{ editMode ? 'Edit' : 'Add New' }} Transaction</h3>
                </div>
                <div class="card-body p-4">
                    <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
                        <div class="mb-4">
                            <div class="btn-group w-100" role="radiogroup" aria-label="Transaction type">
                                <button type="button" class="btn w-50"
                                    [attr.aria-pressed]="transactionForm.get('type')?.value === 'Expense'"
                                    [ngClass]="transactionForm.get('type')?.value === 'Expense' ? 'btn-primary' : 'btn-outline-primary'"
                                    (click)="transactionForm.get('type')?.setValue('Expense'); onTypeChange()">
                                    Expense
                                </button>

                                <button type="button" class="btn w-50"
                                    [attr.aria-pressed]="transactionForm.get('type')?.value === 'Income'"
                                    [ngClass]="transactionForm.get('type')?.value === 'Income' ? 'btn-primary' : 'btn-outline-primary'"
                                    (click)="transactionForm.get('type')?.setValue('Income'); onTypeChange()">
                                    Income
                                </button>
                            </div>
                        </div>

                        <div class="mb-4 row g-2 align-items-center">
                            <div class="col-12 col-md-2">
                                <label for="category" class="form-label fw-medium visually-hidden">Category</label>
                                <select class="form-select" formControlName="category" id="category"
                                    aria-label="Category">
                                    <option *ngFor="let c of availableCategories" [value]="c">{{ c }}</option>
                                </select>
                            </div>

                            <div class="col-12 col-md-10">
                                <input type="text" class="form-control" id="description" formControlName="description"
                                    placeholder="e.g. escape room" />
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="amount" class="form-label fw-medium">Amount</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="amount" formControlName="amount"
                                    placeholder="0.00" step="0.01" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$"
                                    (blur)="formatAmount()" />
                                <div *ngIf="transactionForm.get('amount')?.invalid && (transactionForm.get('amount')?.touched || transactionForm.get('amount')?.dirty)"
                                    class="text-danger small mt-2 ms-1">
                                    Enter a valid amount.
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <label for="createdAt" class="form-label fw-medium">Date</label>
                            <input type="datetime-local" class="form-control" id="createdAt" formControlName="createdAt"
                                aria-label="Date" />
                        </div>

                        <div class="col-md-12 d-flex justify-content-end align-items-center pt-3">
                            <button type="button" class="btn btn-outline-secondary me-2"
                                (click)="cancel()">Cancel</button>
                            <button type="submit" class="btn btn-primary"
                                [disabled]="transactionForm.invalid">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>